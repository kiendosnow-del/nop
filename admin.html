<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>SNOW | Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#f4f8ff}
header{background:#111;color:#fff;padding:14px;text-align:center}
.container{max-width:900px;margin:auto;padding:14px}
.card{background:#fff;border-radius:12px;padding:14px;margin-bottom:14px}
table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid #ddd;text-align:center}
button{padding:6px 10px;border:none;border-radius:6px;cursor:pointer}
.ok{background:#2ecc71;color:#fff}
.no{background:#e74c3c;color:#fff}
.logout{background:#555;color:#fff}
</style>
</head>

<body>

<header>
<h2>â„ï¸ SNOW ADMIN PANEL</h2>
</header>

<div class="container">

<!-- LOGIN -->
<div class="card" id="loginBox">
<h3>ğŸ” ÄÄƒng nháº­p Admin</h3>
<input id="u" placeholder="TÃ i khoáº£n">
<input id="p" type="password" placeholder="Máº­t kháº©u">
<button onclick="login()">ÄÄƒng nháº­p</button>
</div>

<!-- PANEL -->
<div id="panel" style="display:none">

<div class="card">
<button class="logout" onclick="logout()">ÄÄƒng xuáº¥t</button>
</div>

<!-- Náº P TIá»€N -->
<div class="card">
<h3>ğŸ’³ DUYá»†T Náº P TIá»€N</h3>
<table>
<thead>
<tr>
<th>User</th><th>Loáº¡i</th><th>Sá»‘ tiá»n</th><th>Tráº¡ng thÃ¡i</th><th>HÃ nh Ä‘á»™ng</th>
</tr>
</thead>
<tbody id="topupList"></tbody>
</table>
</div>

<!-- ÄÆ N -->
<div class="card">
<h3>ğŸ“¦ QUáº¢N LÃ ÄÆ N</h3>
<table>
<thead>
<tr>
<th>User</th><th>GÃ³i</th><th>GiÃ¡</th><th>Tráº¡ng thÃ¡i</th><th>Xá»­ lÃ½</th>
</tr>
</thead>
<tbody id="orderList"></tbody>
</table>
</div>

</div>
</div>

<script>
/* ===== DATA ===== */
let users = JSON.parse(localStorage.snow_users || "{}");
let orders = JSON.parse(localStorage.snow_orders || "[]");
let topups = JSON.parse(localStorage.snow_topups || "[]");

const ADMIN_USER = "admin_snow";
const ADMIN_PASS = "Snow_oner";

/* ===== LOGIN ===== */
function login(){
if(u.value!==ADMIN_USER||p.value!==ADMIN_PASS)
return alert("Sai admin!");
loginBox.style.display="none";
panel.style.display="block";
render();
}

function logout(){
location.reload();
}

/* ===== SAVE ===== */
function save(){
localStorage.snow_users = JSON.stringify(users);
localStorage.snow_orders = JSON.stringify(orders);
localStorage.snow_topups = JSON.stringify(topups);
}

/* ===== RENDER ===== */
function render(){
renderTopups();
renderOrders();
}

/* ===== TOPUP ===== */
function renderTopups(){
topupList.innerHTML="";
topups.forEach((t,i)=>{
let tr=document.createElement("tr");
tr.innerHTML=`
<td>${t.user}</td>
<td>${t.type}</td>
<td>${Number(t.amount).toLocaleString()}Ä‘</td>
<td>${t.status}</td>
<td>
${t.status==="Chá» duyá»‡t"
?`<button class="ok" onclick="acceptTopup(${i})">âœ”</button>
<button class="no" onclick="rejectTopup(${i})">âœ–</button>`
:""}
</td>`;
topupList.appendChild(tr);
});
}

function acceptTopup(i){
let t=topups[i];
users[t.user].wallet += Number(t.amount);
t.status="ÄÃ£ duyá»‡t";
save(); render();
alert("âœ… ÄÃ£ cá»™ng tiá»n");
}

function rejectTopup(i){
topups[i].status="Tá»« chá»‘i";
save(); render();
}

/* ===== ORDERS ===== */
function renderOrders(){
orderList.innerHTML="";
orders.forEach((o,i)=>{
let tr=document.createElement("tr");
tr.innerHTML=`
<td>${o.user}</td>
<td>${o.goi}</td>
<td>${o.price.toLocaleString()}Ä‘</td>
<td>${o.status}</td>
<td>
${o.status==="Chá» lÃ m"
?`<button class="ok" onclick="doneOrder(${i})">Xong</button>
<button class="no" onclick="refund(${i})">HoÃ n tiá»n</button>`
:""}
</td>`;
orderList.appendChild(tr);
});
}

function doneOrder(i){
orders[i].status="HoÃ n thÃ nh";
save(); render();
}

function refund(i){
let o=orders[i];
users[o.user].wallet += o.price;
o.status="HoÃ n tiá»n";
save(); render();
alert("â†© ÄÃ£ hoÃ n tiá»n");
}
</script>
</body>
</html>
