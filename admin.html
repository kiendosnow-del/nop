<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>SNOW | Admin Panel</title>
<style>
body{font-family:Arial;background:#f4f8ff;padding:20px}
.card{background:#fff;padding:14px;border-radius:12px;margin-bottom:14px}
button{padding:6px 12px;border:none;border-radius:8px;background:#1e90ff;color:#fff}
</style>
</head>
<body>

<h2>ğŸ›  ADMIN PANEL</h2>
<button onclick="logout()">ÄÄƒng xuáº¥t</button>

<div class="card">
<h3>ğŸ’³ Náº P TIá»€N CHá»œ DUYá»†T</h3>
<div id="topupList"></div>
</div>

<div class="card">
<h3>ğŸ§Š ÄÆ N CÃ€Y THUÃŠ</h3>
<div id="orderList"></div>
</div>

<script>
if(!localStorage.snow_admin) location.href="index.html";

let users = JSON.parse(localStorage.snow_users||"{}");
let topups = JSON.parse(localStorage.snow_topups||"[]");
let orders = JSON.parse(localStorage.snow_orders||"[]");

function save(){
localStorage.snow_users=JSON.stringify(users);
localStorage.snow_topups=JSON.stringify(topups);
localStorage.snow_orders=JSON.stringify(orders);
}

/* LOAD TOPUP */
function loadTopup(){
topupList.innerHTML="";
topups.forEach((t,i)=>{
if(t.status!=="Chá» duyá»‡t") return;
topupList.innerHTML+=`
<p>ğŸ‘¤ ${t.user} | ğŸ’° ${t.amount}Ä‘ (${t.method})
<button onclick="duyet(${i})">Duyá»‡t</button>
<button onclick="huy(${i})">Há»§y</button>
</p>`;
});
}

/* DUYá»†T Náº P */
function duyet(i){
let t = topups[i];
users[t.user].wallet += t.amount; // âœ… tá»± Ä‘á»™ng cá»™ng tiá»n
t.status="ÄÃ£ duyá»‡t";
save(); loadTopup();
alert("âœ… ÄÃ£ cá»™ng tiá»n");
}

/* Há»¦Y */
function huy(i){
topups[i].status="ÄÃ£ há»§y";
save(); loadTopup();
}

/* LOAD ORDER */
function loadOrder(){
orderList.innerHTML="";
orders.forEach((o,i)=>{
orderList.innerHTML+=`
<p>ğŸ‘¤ ${o.user} | ğŸ“¦ ${o.goi} | ğŸ§Š ${o.status}
<button onclick="done(${i})">HoÃ n thÃ nh</button>
</p>`;
});
}

function done(i){
orders[i].status="Xong";
save(); loadOrder();
}

function logout(){
localStorage.removeItem("snow_admin");
location.href="index.html";
}

loadTopup();
loadOrder();
</script>
</body>
</html>
