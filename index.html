<!doctype html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <title>â„ï¸ SNOW SHOP â€” CÃ y ThuÃª Blox Fruits</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        body{font-family:Arial,sans-serif;background:#f1f5f9;margin:0;padding-bottom:50px}
        .box{background:#fff;margin:12px;border-radius:12px;padding:14px;box-shadow:0 6px 16px rgba(0,0,0,.06)}
        button{background:#38bdf8;border:0;padding:10px 14px;border-radius:10px;font-weight:bold;margin:6px 0;cursor:pointer;transition:0.3s}
        button:hover{opacity:0.8}
        button.red{background:#ef4444;color:#fff}
        button.green{background:#22c55e;color:#fff}
        input,select{width:100%;padding:10px;margin:6px 0;border-radius:8px;border:1px solid #ddd;box-sizing:border-box}
        small{color:#555;display:block;margin-top:5px}
        hr{border:none;border-top:1px solid #eee;margin:15px 0}
        .info{background:#f8fafc;border:1px dashed #38bdf8;border-radius:10px;padding:10px;margin-top:10px;line-height:1.6}
        .info b{color:#0ea5e9}
        .qr-box{text-align:center;padding:15px;background:#fff;border-radius:10px;margin-top:10px}
        .admin-section{border-top:4px solid #ef4444}
        .badge{padding:2px 8px;border-radius:5px;font-size:12px;background:#e2e8f0}
    </style>
</head>
<body>

<div class="box">
    ğŸ‘¤ <b id="u">ChÆ°a Ä‘Äƒng nháº­p</b> | 
    ğŸ’° <b id="b">0</b>Ä‘ 
    <button class="red" onclick="logout()" style="float:right;padding:5px 10px">ÄÄƒng xuáº¥t</button>
</div>

<div class="box" id="auth_btns">
    <button onclick="auth()">ğŸ”‘ ÄÄƒng nháº­p / ÄÄƒng kÃ½</button>
    <button onclick="showDeposit()">ğŸ’³ Náº¡p tiá»n (QR)</button>
    <button id="adminBtn" class="red" style="display:none" onclick="showAdmin()">ğŸ›  Admin Panel</button>
</div>

<div class="box" id="main_shop">
    <h3>ğŸ›’ ThuÃª dá»‹ch vá»¥</h3>
    <select id="goi" onchange="showInfo()">
        <option value="">-- Chá»n gÃ³i cÃ y thuÃª --</option>
        <optgroup label="ğŸ”° LEVEL">
            <option value="Level 700|20000" data-info="Farm nhanh lÃªn level 700" data-detail="âœ” Farm quest nhanh<br>âœ” KhÃ´ng Ä‘á»•i trÃ¡i<br>âœ” 3â€“5 giá»">Level 700 â€“ 20.000Ä‘</option>
            <option value="700 â†’ 1500|20000" data-info="Farm tá»« Sea 2" data-detail="âœ” Farm boss + quest<br>âœ” KhÃ´ng máº¥t Ä‘á»“<br>âœ” 1â€“2 ngÃ y">700 â†’ 1500 â€“ 20.000Ä‘</option>
            <option value="1500 â†’ 2800|20000" data-info="Farm Sea 3" data-detail="âœ” Farm full Sea 3<br>âœ” An toÃ n 100%<br>âœ” 2â€“3 ngÃ y">1500 â†’ 2800 â€“ 20.000Ä‘</option>
            <option value="0 â†’ MAX|50000" data-info="CÃ y tá»« Ä‘áº§u tá»›i max" data-detail="âœ” Full Sea 1â€“2â€“3<br>âœ” KhÃ´ng máº¥t acc<br>âœ” 4â€“6 ngÃ y">0 â†’ MAX â€“ 50.000Ä‘</option>
        </optgroup>
        <optgroup label="ğŸ’ ITEM">
            <option value="Má» Neo|20000" data-info="LÃ m Má» Neo" data-detail="âœ” Full quest<br>âœ” KhÃ´ng máº¥t Ä‘á»“<br>âœ” 1 ngÃ y">Má» Neo â€“ 20.000Ä‘</option>
            <option value="Tushita|15000" data-info="Kiáº¿m Tushita" data-detail="âœ” Full quest<br>âœ” An toÃ n<br>âœ” Trong ngÃ y">Tushita â€“ 15.000Ä‘</option>
            <option value="Yama|30000" data-info="Kiáº¿m Yama" data-detail="âœ” Full Yama<br>âœ” KhÃ´ng máº¥t Ä‘á»“<br>âœ” 1â€“2 ngÃ y">Yama â€“ 30.000Ä‘</option>
            <option value="Tam Kiáº¿m Full|35000" data-info="True Triple Katana" data-detail="âœ” Full 3 kiáº¿m<br>âœ” KhÃ´ng rollback<br>âœ” 2â€“3 ngÃ y">Tam Kiáº¿m Full â€“ 35.000Ä‘</option>
            <option value="CDK|30000" data-info="Cursed Dual Katana" data-detail="âœ” Full CDK<br>âœ” KhÃ´ng máº¥t item<br>âœ” 1â€“2 ngÃ y">CDK â€“ 30.000Ä‘</option>
        </optgroup>
        <optgroup label="ğŸ’  V4">
            <option value="Full Gear V4|30000" data-info="Full Gear V4" data-detail="âœ” Full Gear<br>âœ” Thá»©c tá»‰nh V4<br>âœ” 1â€“2 ngÃ y">Full Gear V4 â€“ 30.000Ä‘</option>
            <option value="1 Gear V4|5000" data-info="Up 1 Gear" data-detail="âœ” 1 Gear báº¥t ká»³<br>âœ” Nhanh gá»n<br>âœ” Trong ngÃ y">1 Gear V4 â€“ 5.000Ä‘</option>
        </optgroup>
        <optgroup label="ğŸ¥‹ MELEE">
            <option value="Godhuman|20000" data-info="Melee Godhuman" data-detail="âœ” Full Godhuman<br>âœ” Farm nguyÃªn liá»‡u<br>âœ” 1 ngÃ y">Godhuman â€“ 20.000Ä‘</option>
            <option value="Melee V2|15000" data-info="Up Melee V2" data-detail="âœ” Melee V2<br>âœ” Nhanh<br>âœ” Trong ngÃ y">Melee V2 â€“ 15.000Ä‘</option>
        </optgroup>
    </select>
    <div id="goiInfo" class="info" style="display:none"></div>
    <button class="green" style="width:100%;font-size:16px" onclick="order()">THUÃŠ NGAY (Trá»« tiá»n vÃ­)</button>
    <small>ğŸ“© ÄÆ¡n sáº½ Ä‘Æ°á»£c gá»­i qua Discord Admin</small>
</div>

<div class="box">
    <h3>ğŸ“œ Lá»‹ch sá»­ cá»§a tÃ´i</h3>
    <div id="his"></div>
</div>

<div id="adminPanel" class="box admin-section" style="display:none">
    <h3>ğŸ›  Quáº£n lÃ½ (Admin Only)</h3>
    <div id="adminList">Äang táº£i danh sÃ¡ch chá»...</div>
</div>

<div id="modal"></div>

<script>
const API = "/api"; 
const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1465766093543964673/QfBdKIbYOgo5_s9S_YaJDF6vg6ZF8RyWwEw06uPZW3YtZuPUjCmODVJfdFmowfH1d9Gm"; // Thay link webhook cá»§a báº¡n vÃ o Ä‘Ã¢y

let cur = null;

/* ===== HIá»‚N THá»Š THÃ”NG TIN GÃ“I ===== */
function showInfo(){
    let s=goi.options[goi.selectedIndex];
    if(!s.dataset.info){goiInfo.style.display="none";return;}
    goiInfo.style.display="block";
    goiInfo.innerHTML=`<b>ğŸ“Œ ${s.dataset.info}</b><br>${s.dataset.detail}`;
}

/* ===== THANH TOÃN QR ===== */
function showDeposit(){
    modal.innerHTML = `
    <div class="box" style="position:fixed;top:10%;left:5%;right:5%;z-index:100;background:#fff;border:2px solid #38bdf8">
        <h3>ğŸ’³ Náº¡p tiá»n qua NgÃ¢n hÃ ng / VÃ­</h3>
        <select id="bankSelect" onchange="updateQR()">
            <option value="MBBANK">MB Bank (QuÃ¢n Äá»™i)</option>
            <option value="MOMO">VÃ­ MoMo</option>
        </select>
        <input type="number" id="napAmount" placeholder="Nháº­p sá»‘ tiá»n muá»‘n náº¡p (vnÄ‘)" oninput="updateQR()">
        <div class="qr-box" id="qrArea">
            <p>Vui lÃ²ng chá»n ngÃ¢n hÃ ng vÃ  nháº­p sá»‘ tiá»n</p>
        </div>
        <button onclick="modal.innerHTML=''">ÄÃ³ng</button>
    </div>`;
}

function updateQR(){
    const bank = document.getElementById('bankSelect').value;
    const amount = document.getElementById('napAmount').value;
    const user = cur ? cur.username : 'KHACH';
    const content = `NAP ${user}`;
    
    if(amount > 0) {
        // Sá»­ dá»¥ng API VietQR Ä‘á»ƒ táº¡o mÃ£ tá»± Ä‘á»™ng
        const qrUrl = `https://img.vietqr.io/image/${bank}-123456789-compact2.png?amount=${amount}&addInfo=${content}`;
        document.getElementById('qrArea').innerHTML = `
            <img src="${qrUrl}" style="width:200px;border:1px solid #ddd">
            <p>Ná»™i dung CK: <b>${content}</b></p>
            <small>(Há»‡ thá»‘ng tá»± Ä‘á»™ng duyá»‡t sau 1-3 phÃºt)</small>
        `;
    }
}

/* ===== Gá»¬I DISCORD WEBHOOK ===== */
async function sendDiscord(service, price) {
    if(!)
    const msg = {
        embeds: [{
            title: "ğŸ”¥ ÄÆ N CÃ€Y THUÃŠ Má»šI",
            color: 5814783,
            fields: [
                { name: "NgÆ°á»i Ä‘áº·t", value: cur.username, inline: true },
                { name: "Dá»‹ch vá»¥", value: service, inline: true },
                { name: "GiÃ¡ tiá»n", value: price + "Ä‘", inline: true }
            ],
            footer: { text: "Snow Shop System" },
            timestamp: new Date()
        }]
    };
    await fetch(DISCORD_WEBHOOK, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(msg)});
}

/* ===== ADMIN LOGIC (SIMULATED) ===== */
function showAdmin() {
    const p = document.getElementById('adminPanel');
    p.style.display = p.style.display === 'none' ? 'block' : 'none';
    // Giáº£ láº­p danh sÃ¡ch chá» duyá»‡t
    document.getElementById('adminList').innerHTML = `
        <div class="info">
            <b>User: tung99</b> - Náº¡p 50,000Ä‘ 
            <button class="green" onclick="approve(50000)">Duyá»‡t 1-Click</button>
        </div>
    `;
}

async function approve(amt) {
    alert("ÄÃ£ cá»™ng " + amt + "Ä‘ vÃ o tÃ i khoáº£n khÃ¡ch!");
    // Logic thá»±c táº¿: fetch(API + "/admin/approve", ...)
}

/* ===== CÃC HÃ€M CÅ¨ (ÄÃƒ Tá»I Æ¯U) ===== */
async function login(){
    // Giáº£ láº­p login thÃ nh cÃ´ng Ä‘á»ƒ báº¡n test giao diá»‡n
    const userVal = document.getElementById('au').value;
    if(!userVal) return alert("Nháº­p tÃªn");
    cur = { username: userVal, balance: 100000, role: 'admin' };
    localStorage.token = "fake-token";
    modal.innerHTML="";
    if(cur.role === 'admin') document.getElementById('adminBtn').style.display = 'inline-block';
    render();
}

async function order(){
    if(!cur) return alert("Vui lÃ²ng Ä‘Äƒng nháº­p trÆ°á»›c!");
    if(!goi.value) return alert("Vui lÃ²ng chá»n gÃ³i cÃ y!");
    let [name, price] = goi.value.split("|");
    if(cur.balance < price) return alert("Báº¡n khÃ´ng Ä‘á»§ tiá»n!");

    // Giáº£ láº­p trá»« tiá»n
    cur.balance -= price;
    render();
    await sendDiscord(name, price);
    alert("Äáº·t Ä‘Æ¡n thÃ nh cÃ´ng! Admin Ä‘Ã£ nháº­n Ä‘Æ°á»£c thÃ´ng bÃ¡o.");
    
    const h = document.getElementById('his');
    h.innerHTML = `<div>ğŸ“¦ ${name} â€” <b style="color:orange">Äang xá»­ lÃ½</b></div>` + h.innerHTML;
}

function auth(){
    modal.innerHTML=`<div class="box" style="position:fixed;top:20%;left:10%;right:10%;z-index:100;background:#fff;border:2px solid #38bdf8">
        <h3>ğŸ” ÄÄƒng nháº­p há»‡ thá»‘ng</h3>
        <input id="au" placeholder="TÃªn tÃ i khoáº£n">
        <input id="ap" type="password" placeholder="Máº­t kháº©u">
        <button onclick="login()" style="width:100%">VÃ o cá»­a hÃ ng</button>
        <button onclick="modal.innerHTML=''" class="red">Há»§y</button>
    </div>`;
}

function render(){
    if(!cur){u.innerText="ChÆ°a Ä‘Äƒng nháº­p";b.innerText=0;return;}
    u.innerText=cur.username;
    b.innerText=cur.balance.toLocaleString();
}

function logout(){
    localStorage.removeItem("token");
    cur=null;
    document.getElementById('adminBtn').style.display = 'none';
    document.getElementById('adminPanel').style.display = 'none';
    render();
}
</script>

</body>
</html>
