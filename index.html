<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>SNOW | C√†y Thu√™</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#f4f8ff}
header{background:linear-gradient(135deg,#1e90ff,#00c6ff);color:#fff;padding:16px;text-align:center}
.container{max-width:520px;margin:auto;padding:16px}
.card{background:#fff;border-radius:14px;padding:14px;margin-bottom:14px}
select,input,textarea,button{width:100%;padding:10px;margin:6px 0;border-radius:10px}
button{background:#1e90ff;color:#fff;border:none;font-weight:bold}
.price{font-size:20px;font-weight:bold;color:#1e90ff}
</style>
</head>
<body>

<header>
<h1>‚ùÑÔ∏è SNOW</h1>
<p>Xin ch√†o <b id="uname"></b> | V√≠: <b id="wallet">0ƒë</b></p>
</header>

<div class="container">

<div class="card">
<select id="goi">
<option value="0">-- Ch·ªçn g√≥i --</option>
<optgroup label="LEVEL">
<option value="20000">700 ‚Üí 1500</option>
<option value="20000">1500 ‚Üí 2800</option>
<option value="50000">0 ‚Üí MAX</option>
</optgroup>
<optgroup label="ITEM">
<option value="20000">M·ªè Neo</option>
<option value="15000">Tushita</option>
<option value="30000">Yama</option>
<option value="35000">Tam Ki·∫øm Full</option>
<option value="30000">CDK</option>
</optgroup>
</select>
<div class="price">Th√†nh ti·ªÅn: <span id="total">0ƒë</span></div>
</div>

<div class="card">
<input id="rbx" placeholder="Username Roblox">
<textarea id="note" placeholder="Ghi ch√∫"></textarea>
<button onclick="buy()">üõí MUA NGAY</button>
</div>

</div>

<script>
const WEBHOOK="PUT_WEBHOOK_C·ª¶A_B·∫†N_V√ÄO_ƒê√ÇY";

let users=JSON.parse(localStorage.getItem("snow_users"))||{};
let user=localStorage.getItem("snow_user");
if(!user) location.href="login.html";

uname.innerText=user;
wallet.innerText=users[user].wallet.toLocaleString()+"ƒë";

goi.onchange=()=> total.innerText=Number(goi.value).toLocaleString()+"ƒë";

function buy(){
  const price=Number(goi.value);
  if(price<=0) return alert("Ch∆∞a ch·ªçn g√≥i");
  if(users[user].wallet<price) return alert("Kh√¥ng ƒë·ªß ti·ªÅn");

  users[user].wallet-=price;
  users[user].orders.push({goi:goi.options[goi.selectedIndex].text,price});
  localStorage.setItem("snow_users",JSON.stringify(users));
  wallet.innerText=users[user].wallet.toLocaleString()+"ƒë";

  fetch(WEBHOOK,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      username:"‚ùÑÔ∏è SNOW ORDER",
      content:`üë§ ${user}\nüì¶ ${goi.options[goi.selectedIndex].text}\nüí∞ ${price.toLocaleString()}ƒë`
    })
  });

  alert("‚úÖ ƒê·∫∑t ƒë∆°n th√†nh c√¥ng!");
}
</script>

<script>
const WEBHOOK_ORDER = "https://discord.com/api/webhooks/1465766093543964673/QfBdKIbYOgo5_s9S_YaJDF6vg6ZF8RyWwEw06uPZW3YtZuPUjCmODVJfdFmowfH1d9Gm";

function guiDon(){
  if(!currentUser) return alert("‚ö†Ô∏è Vui l√≤ng ƒëƒÉng nh·∫≠p!");

  const price = Number(goi.value);
  if(price <= 0) return alert("‚ö†Ô∏è Ch∆∞a ch·ªçn g√≥i!");

  if(users[currentUser].wallet < price)
    return alert("‚ùå V√≠ kh√¥ng ƒë·ªß ti·ªÅn!");

  // üîª Tr·ª´ ti·ªÅn
  users[currentUser].wallet -= price;
  saveUsers();
  showWallet();

  // üöÄ G·ª≠i Discord
  fetch(WEBHOOK_ORDER,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      username:"‚ùÑÔ∏è SNOW ORDER",
      embeds:[{
        title:"üßä ƒê∆†N M·ªöI",
        color:3447003,
        fields:[
          { name:"üë§ T√†i kho·∫£n Web", value: currentUser, inline:true },
          { name:"üéÆ Username Roblox", value: document.getElementById("user").value || "Kh√¥ng", inline:true },
          { name:"üì¶ G√≥i", value: goi.options[goi.selectedIndex].text },
          { name:"üí∞ Gi√°", value: price.toLocaleString("vi-VN")+"ƒë", inline:true },
          { name:"üìù Ghi ch√∫", value: document.getElementById("note").value || "Kh√¥ng" }
        ],
        footer:{ text:"SNOW ‚Ä¢ Auto Order" },
        timestamp: new Date()
      }]
    })
  });

  alert("‚úÖ ƒê√£ g·ª≠i ƒë∆°n & tr·ª´ ti·ªÅn v√≠!");
}
</script>
</body>
</html>
